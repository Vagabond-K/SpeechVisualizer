<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:SpeechVisualizer">

    <DataTemplate DataType="{x:Type local:Speaker}">
        <Grid Height="316" Width="316" Margin="30" RenderTransformOrigin="0.5,0.5" DataContext="{Binding AudioData}">
            <Grid.Resources>
                <CircleEase x:Key="EasingFunction" EasingMode="EaseInOut"/>
            </Grid.Resources>
            <Grid.RenderTransform>
                <ScaleTransform/>
            </Grid.RenderTransform>
            <Grid.Style>
                <Style TargetType="{x:Type Grid}">
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding IsActivated}" Value="True">
                            <DataTrigger.EnterActions>
                                <BeginStoryboard>
                                    <Storyboard RepeatBehavior="Forever" AutoReverse="True">
                                        <DoubleAnimation From="1" To="1.025" Duration="0:0:0.07" Storyboard.TargetProperty="RenderTransform.ScaleX" EasingFunction="{StaticResource EasingFunction}"/>
                                    </Storyboard>
                                </BeginStoryboard>
                                <BeginStoryboard>
                                    <Storyboard RepeatBehavior="Forever" AutoReverse="True">
                                        <DoubleAnimation From="1.025" To="1" Duration="0:0:0.07" Storyboard.TargetProperty="RenderTransform.ScaleY" EasingFunction="{StaticResource EasingFunction}"/>
                                    </Storyboard>
                                </BeginStoryboard>
                            </DataTrigger.EnterActions>
                            <DataTrigger.ExitActions>
                                <BeginStoryboard>
                                    <Storyboard>
                                        <DoubleAnimation To="1" Duration="0:0:0.5" Storyboard.TargetProperty="RenderTransform.ScaleX"/>
                                    </Storyboard>
                                </BeginStoryboard>
                                <BeginStoryboard>
                                    <Storyboard>
                                        <DoubleAnimation To="1" Duration="0:0:0.5" Storyboard.TargetProperty="RenderTransform.ScaleY"/>
                                    </Storyboard>
                                </BeginStoryboard>
                            </DataTrigger.ExitActions>
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </Grid.Style>
            <Grid.Triggers>
                <EventTrigger RoutedEvent="Loaded">
                    <BeginStoryboard>
                        <Storyboard RepeatBehavior="Forever">
                            <DoubleAnimation To="316" Duration="0:0:0.5" Storyboard.TargetName="Offset" Storyboard.TargetProperty="Y"/>
                        </Storyboard>
                    </BeginStoryboard>
                </EventTrigger>
            </Grid.Triggers>
            <Ellipse Fill="Black">
                <Ellipse.Effect>
                    <DropShadowEffect Direction="270" BlurRadius="20" ShadowDepth="10"/>
                </Ellipse.Effect>
            </Ellipse>
            <Path Fill="#FF808080" Data="{Binding Data, ElementName=VagabondK}"/>
            <Path x:Name="VagabondK" Data="F1 M 73.1967,204.002L 67.6765,240.003L 51.9958,240.003L 45.9956,204.002L 57.196,204.002C 58.1561,213.682 58.9561,222.403 59.5961,229.363C 60.2362,222.323 60.7962,216.162 61.3562,210.962L 61.9962,204.002L 73.1967,204.002 Z M 93.0374,204.002L 99.2776,240.003L 87.9172,240.003L 87.3572,233.283L 83.437,233.283L 82.877,240.003L 71.5166,240.003L 77.2768,204.002L 93.0374,204.002 Z M 86.9572,227.123C 86.5571,223.043 85.9971,217.922 85.4371,211.842L 83.357,227.123L 86.9572,227.123 Z M 126.159,217.282L 114.958,217.282L 114.958,214.162C 114.958,212.242 114.878,210.962 114.718,210.482C 114.558,210.002 114.238,209.762 113.598,209.762C 113.118,209.762 112.798,210.002 112.558,210.402C 112.398,210.802 112.318,211.922 112.318,213.682L 112.318,230.403C 112.318,231.923 112.398,232.963 112.638,233.443C 112.798,233.923 113.198,234.243 113.838,234.243C 114.478,234.243 114.958,233.923 115.198,233.363C 115.438,232.803 115.518,231.763 115.518,230.243L 115.518,226.163L 113.358,226.163L 113.358,220.883L 126.159,220.883L 126.159,240.003L 119.438,240.003L 118.478,237.043C 117.678,238.083 116.798,238.883 115.678,239.283C 114.558,239.763 113.198,240.003 111.678,240.003C 109.838,240.003 108.158,239.603 106.558,238.883C 105.038,238.163 103.838,237.203 102.958,236.163C 102.158,235.043 101.678,233.923 101.438,232.723C 101.198,231.603 101.118,229.763 101.118,227.443L 101.118,217.122C 101.118,213.842 101.358,211.442 101.758,209.922C 102.238,208.482 103.438,207.122 105.438,205.842C 107.438,204.562 110.078,204.002 113.278,204.002C 116.478,204.002 119.038,204.482 121.118,205.602C 123.199,206.642 124.559,207.922 125.199,209.442C 125.839,210.882 126.159,213.042 126.159,215.842L 126.159,217.282 Z M 149.44,204.002L 155.76,240.003L 144.399,240.003L 143.839,233.283L 139.919,233.283L 139.359,240.003L 127.999,240.003L 133.759,204.002L 149.44,204.002 Z M 143.439,227.123C 143.039,223.043 142.479,217.922 141.919,211.842L 139.839,227.123L 143.439,227.123 Z M 157.6,204.002L 168.64,204.002C 172.161,204.002 174.801,204.162 176.641,204.642C 178.401,205.122 179.841,206.482 180.961,207.842C 182.081,209.202 182.641,211.442 182.641,214.482C 182.641,216.562 182.241,218.003 181.361,218.802C 180.481,219.602 178.881,220.243 176.321,220.643C 178.801,221.123 180.481,221.923 181.361,223.043C 182.241,224.083 182.641,225.843 182.641,228.083L 182.641,231.363C 182.641,233.683 182.321,235.443 181.681,236.563C 181.041,237.683 180.001,238.483 178.641,238.883C 177.201,239.363 174.401,240.003 170.08,240.003L 157.6,240.003L 157.6,204.002 Z M 168.8,210.162L 168.8,218.242C 169.12,218.162 169.44,218.162 169.6,218.162C 170.4,218.162 170.88,217.922 171.12,217.522C 171.36,217.042 171.44,215.762 171.44,213.602C 171.44,212.482 171.36,211.682 171.2,211.282C 170.96,210.802 170.8,210.482 170.48,210.402C 170.16,210.242 169.6,210.242 168.8,210.162 Z M 168.8,223.523L 168.8,233.763C 169.92,233.683 170.64,233.523 170.96,233.123C 171.28,232.723 171.44,231.843 171.44,230.323L 171.44,226.963C 171.44,225.363 171.28,224.403 171.04,224.083C 170.72,223.763 170,223.603 168.8,223.523 Z M 211.922,224.963C 211.922,228.403 211.842,230.883 211.682,232.323C 211.442,233.763 210.802,235.043 209.762,236.243C 208.722,237.443 207.362,238.403 205.602,239.043C 203.842,239.683 201.762,240.003 199.442,240.003C 197.202,240.003 195.201,239.683 193.441,239.043C 191.681,238.483 190.241,237.603 189.121,236.323C 188.081,235.123 187.441,233.843 187.201,232.403C 187.041,230.963 186.881,228.483 186.881,224.963L 186.881,219.042C 186.881,215.522 186.961,213.122 187.201,211.682C 187.361,210.242 188.001,208.882 189.041,207.682C 190.081,206.482 191.521,205.442 193.281,204.802C 195.041,204.162 197.042,204.002 199.442,204.002C 201.682,204.002 203.682,204.162 205.442,204.722C 207.202,205.362 208.642,206.402 209.682,207.602C 210.802,208.802 211.442,210.162 211.602,211.522C 211.842,212.962 211.922,215.442 211.922,219.042L 211.922,224.963 Z M 200.722,213.522C 200.722,211.922 200.642,210.882 200.482,210.402C 200.322,210.002 200.002,209.762 199.442,209.762C 199.042,209.762 198.642,209.922 198.402,210.322C 198.242,210.642 198.082,211.762 198.082,213.522L 198.082,229.763C 198.082,231.763 198.162,233.043 198.322,233.523C 198.482,234.003 198.802,234.243 199.442,234.243C 200.002,234.243 200.322,233.923 200.482,233.363C 200.642,232.883 200.722,231.523 200.722,229.523L 200.722,213.522 Z M 240.723,204.002L 240.723,240.003L 231.123,240.003L 225.763,223.603L 225.763,240.003L 216.162,240.003L 216.162,204.002L 224.723,204.002L 231.123,220.243L 231.123,204.002L 240.723,204.002 Z M 244.963,204.002L 253.044,204.002C 258.244,204.002 261.844,204.162 263.684,204.562C 265.524,204.962 266.884,206.082 267.844,207.042C 268.804,207.922 269.444,208.962 269.684,210.082C 269.924,211.282 270.004,213.442 270.004,216.802L 270.004,229.123C 270.004,232.243 269.844,234.403 269.444,235.443C 269.124,236.483 268.484,237.363 267.684,237.923C 266.804,238.563 264.964,239.203 263.684,239.443C 262.324,239.683 261.204,240.003 258.564,240.003L 244.963,240.003L 244.963,204.002 Z M 256.164,210.162L 256.164,233.763C 257.364,233.763 258.084,233.523 258.404,232.963C 258.644,232.403 258.804,230.963 258.804,228.563L 258.804,214.642C 258.804,213.042 258.804,212.002 258.644,211.522C 258.564,211.042 258.404,210.722 258.004,210.482C 257.684,210.322 257.044,210.162 256.164,210.162 Z M 158,103.998C 175.681,103.998 190.001,118.318 190.001,135.999C 190.001,153.68 175.681,168 158,168C 140.319,168 125.999,153.68 125.999,135.999C 125.999,118.318 140.319,103.998 158,103.998 Z M 137.999,111.998L 137.999,160L 149.04,160L 149.04,135.999L 149.04,111.998L 137.999,111.998 Z M 149.04,135.999L 165.04,160L 178.001,160L 162,135.999L 178.001,111.998L 165.04,111.998L 149.04,135.999 Z M 270.004,75.9969L 270.004,196.002L 250.004,196.002L 45.9956,196.002L 45.9956,75.9968L 65.9964,75.9969L 270.004,75.9969 Z M 250.004,196.002L 258.004,188.001L 258.004,87.9973L 77.9968,87.9973L 77.9968,95.9976L 157.6,95.9976C 146.56,96.0776 136.639,100.638 129.439,107.998L 65.9964,107.998L 65.9964,75.9969L 57.9961,83.9971L 57.9961,184.001L 238.003,184.001L 238.003,176.001L 158.08,176.001C 169.28,176.001 179.361,171.361 186.561,164L 250.004,164L 250.004,196.002 Z M 230.003,95.9976L 230.003,144L 238.003,144L 238.003,95.9976L 250.004,95.9976L 250.004,156L 218.002,156L 218.002,107.998L 201.842,107.998C 207.042,116.078 210.002,125.679 210.002,135.999C 210.002,143.039 208.562,149.84 206.002,156L 192.641,156C 196.082,150.08 198.002,143.279 198.002,135.999C 198.002,113.998 180.321,96.1576 158.4,95.9976L 230.003,95.9976 Z M 65.9964,115.998L 123.359,115.998C 119.919,121.839 117.998,128.719 117.998,135.999C 117.998,158.08 135.839,175.921 157.92,176.001L 65.9964,176.001L 65.9964,164L 81.997,164L 81.997,127.999L 65.9964,127.999L 65.9964,115.998 Z M 93.9975,127.999L 93.9975,164L 114.158,164C 109.038,155.92 105.998,146.32 105.998,135.999C 105.998,133.279 106.238,130.639 106.638,127.999L 93.9975,127.999 Z M 158,6.10352e-005C 245.261,6.10352e-005 316,70.7391 316,158C 316,245.261 245.261,316 158,316C 70.739,316 4.975e-005,245.261 4.975e-005,158C 4.975e-005,70.7391 70.7391,6.10352e-005 158,6.10352e-005 Z M 158,12.0001C 77.3664,12.0001 12,77.3665 12,158C 12,238.634 77.3664,304 158,304C 238.634,304 304,238.634 304,158C 304,77.3665 238.634,12.0001 158,12.0001 Z ">
                <Path.Fill>
                    <LinearGradientBrush EndPoint="0.5,0" StartPoint="0.5,1" ColorInterpolationMode="SRgbLinearInterpolation" SpreadMethod="Repeat">
                        <LinearGradientBrush.Transform>
                            <TransformGroup>
                                <TranslateTransform x:Name="Offset" Y="0"/>
                                <ScaleTransform ScaleY="2"/>
                                <RotateTransform Angle="-45" CenterX="158" CenterY="158"/>
                            </TransformGroup>
                        </LinearGradientBrush.Transform>
                        <GradientStop Color="#FFFF8080"/>
                        <GradientStop Color="#FFFFFF80" Offset="0.16666666"/>
                        <GradientStop Color="#FF80FF80" Offset="0.33333333"/>
                        <GradientStop Color="#FF80FFFF" Offset="0.5"/>
                        <GradientStop Color="#FF8080FF" Offset="0.66666666"/>
                        <GradientStop Color="#FFFF80FF" Offset="0.83333333"/>
                        <GradientStop Color="#FFFF8080" Offset="1"/>
                    </LinearGradientBrush>
                </Path.Fill>
                <Path.Style>
                    <Style TargetType="{x:Type Path}">
                        <Setter Property="Opacity" Value="0"/>
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding IsActivated}" Value="True">
                                <DataTrigger.EnterActions>
                                    <BeginStoryboard>
                                        <Storyboard>
                                            <DoubleAnimation To="1" Duration="0" Storyboard.TargetProperty="Opacity"/>
                                        </Storyboard>
                                    </BeginStoryboard>
                                </DataTrigger.EnterActions>
                                <DataTrigger.ExitActions>
                                    <BeginStoryboard>
                                        <Storyboard>
                                            <DoubleAnimation To="0" Duration="0:0:0.5" Storyboard.TargetProperty="Opacity"/>
                                        </Storyboard>
                                    </BeginStoryboard>
                                </DataTrigger.ExitActions>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </Path.Style>
            </Path>
        </Grid>
    </DataTemplate>
    
    <DataTemplate DataType="{x:Type local:Background}">
        <Canvas>
            <Canvas.Background>
                <ImageBrush ImageSource="/Images/background.jpg"/>
            </Canvas.Background>
            <Canvas.Triggers>
                <EventTrigger RoutedEvent="Loaded">
                    <BeginStoryboard>
                        <Storyboard RepeatBehavior="Forever">
                            <DoubleAnimation Storyboard.TargetName="Wave1" Storyboard.TargetProperty="(Canvas.Left)" From="-1362" To="-20" Duration="0:0:20"/>
                        </Storyboard>
                    </BeginStoryboard>
                    <BeginStoryboard>
                        <Storyboard RepeatBehavior="Forever">
                            <DoubleAnimation Storyboard.TargetName="Wave2" Storyboard.TargetProperty="(Canvas.Left)" From="-2208" To="-224" Duration="0:0:15"/>
                        </Storyboard>
                    </BeginStoryboard>
                </EventTrigger>
            </Canvas.Triggers>
            <Path x:Name="Wave1" Width="2686" Height="1070" Canvas.Left="-1362" Canvas.Top="-621" Stretch="Fill" Fill="#10FFFFFF" Stroke="Gray" StrokeThickness="2" Data="F1 M 2666,360.015L 2666,-620.998L -19.9995,-620.998L -19.9995,360.015C 91.9172,404.506 203.834,449.002 315.751,449.002C 427.667,449.002 539.584,404.506 651.5,360.015C 763.417,315.525 875.334,271.034 987.25,271.034C 1099.17,271.034 1211.08,315.525 1323,360.015C 1434.92,404.506 1546.83,448.996 1658.75,448.996C 1770.67,448.996 1882.58,404.506 1994.5,360.015C 2106.42,315.525 2218.33,271.034 2330.25,271.034C 2442.17,271.034 2554.08,315.525 2666,360.015 Z "/>
            <Path x:Name="Wave2" Width="3970" Height="1426.56" Canvas.Left="-2208" Canvas.Top="241.443" Stretch="Fill" Fill="#10FFFFFF" Stroke="Gray" StrokeThickness="2" Data="F1 M 3746,360.082L 3746,1668L -224,1668L -224,360.082C -58.5833,300.766 106.833,241.443 272.25,241.443C 437.667,241.443 603.083,300.766 768.5,360.082C 933.917,419.399 1099.33,478.715 1264.75,478.715C 1430.17,478.715 1595.58,419.399 1761,360.082C 1926.42,300.766 2091.83,241.45 2257.25,241.45C 2422.67,241.45 2588.08,300.766 2753.5,360.082C 2918.92,419.399 3084.33,478.715 3249.75,478.715C 3415.17,478.715 3580.58,419.399 3746,360.082 Z "/>
        </Canvas>
    </DataTemplate>

</ResourceDictionary>